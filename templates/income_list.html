{% extends 'base.html' %}
{% block title %}My Incomes{% endblock %}
{% block content %}

<div class="level has-background-light p-3">
  <div class="level-left">
    <h1 class="title is-3 is-family-primary" style="font-family: 'Comic Sans MS', cursive; font-weight: bold;">My Incomes</h1>
  </div>
<!-- Center: Sum of Incomes -->
      <div class="level-item">
        <p class="subtitle title has-text-weight-bold">
          Total: <strong>{{ total_income }}</strong>
        </p>
      </div>
  <div class="level-right">
    <a href="{% url 'income_create' %}" class="button is-primary">Add Income</a>
  </div>
</div>

<form method="get" style="margin-bottom: 1em;">
    <input type="text" name="search" placeholder="Search incomes..." value="{{ search_query }}">
    
    <select name="sort">
        <option value="date" {% if sort_option == "date" %}selected{% endif %}>Date ↑</option>
        <option value="-date" {% if sort_option == "-date" %}selected{% endif %}>Date ↓</option>
        <option value="amount" {% if sort_option == "amount" %}selected{% endif %}>Amount ↑</option>
        <option value="-amount" {% if sort_option == "-amount" %}selected{% endif %}>Amount ↓</option>
    </select>

    <button type="submit">Apply</button>
</form>


<table class="table is-striped is-hoverable is-fullwidth">
    <thead>
        <tr>
            <th>Amount</th>
            <th>Date</th>
            <th>Actions</th>
        </tr>
    </thead>  
    <tbody>  
    {% for income in page_obj  %}
    <tr>
        <td>{{ income.amount }}</td>
        <td>{{ income.date }}</td>
        <td>
            <a href="{% url 'income_edit' income.id %}" title="Edit">
                <i class="fas fa-edit" style="color: #1DF709FF; "></i>
            </a>
            <a href="{% url 'income_delete' income.id %}" title="Delete" onclick="return confirm('Are you sure?')">
                <i class="fas fa-trash-alt" style="color: #dc3545;  "></i>
            </a>
        </td>
    {% endfor %}
    </tbody>
</table>



    <!-- Pagination controls -->
    <nav class="pagination" role="navigation" aria-label="pagination">
        {% if incomes.has_previous %}
            <a class="pagination-previous" href="?page={{ incomes.previous_page_number }}">Previous</a>
        {% else %}
            <a class="pagination-previous" disabled>Previous</a>
        {% endif %}

        {% if incomes.has_next %}
            <a class="pagination-next" href="?page={{ incomes.next_page_number }}">Next</a>
        {% else %}
            <a class="pagination-next" disabled>Next</a>
        {% endif %}
    </nav>

{% endblock %}
{% comment %} 
<section class="section">
  <div class="container">
    <div class="level">
      <!-- Left side: Page Title -->
      <div class="level-left">
        <h1 class="title">My Incomes</h1>
      </div>

      <!-- Center: Sum of Incomes -->
      <div class="level-item">
        <p class="subtitle">
          Total: <strong>{{ total_income }}</strong>
        </p>
      </div>

      <!-- Right side: Add Income Button -->
      <div class="level-right">
        <a href="{% url 'income_create' %}" class="button is-primary">
          + Add Income
           <p><a class="button is-link" href="{% url 'income_create' %}">Add New Income</a></p> 
        </a>
      </div>
    </div>
  </div>
</section> {% endcomment %}
        {% comment %} <td>
            <a href="{% url 'income_edit' income.id %}" title="Edit">
                <i class="fas fa-edit" style="color: #007bff;"></i>
            </a>
        </td> {% endcomment %}
        {% comment %} <td>
            <a href="{% url 'income_delete' income.id %}" title="Delete" onclick="return confirm('Are you sure?')">
                <i class="fas fa-trash-alt" style="color: #dc3545;"></i>
            </a>
        </td> {% endcomment %}

{% comment %} <td>
    <!-- Edit Button -->
    <a href="{% url 'income_edit' income.id %}" class="btn btn-sm btn-warning">
        <i class="fas fa-edit" style="color: #1DF709FF;"></i>
    </a>

    <!-- Delete Button -->
    <a href="{% url 'income_delete' income.id %}" 
       class="btn btn-sm btn-danger" 
       onclick="return confirm('Are you sure you want to delete this income?');">
        <i class="fas fa-trash-alt" style="color: #dc3545;"></i>
    </a>
</td> {% endcomment %}

        {% comment %} <td>
            <a href="{% url 'income_edit' income.pk %}">Edit</a> |
            <a href="{% url 'income_delete' income.pk %}">Delete</a>
        </td>
    </tr> {% endcomment %}






